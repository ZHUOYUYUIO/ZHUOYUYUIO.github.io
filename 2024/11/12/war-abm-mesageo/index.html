

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="zhuoyu">
  <meta name="keywords" content="">
  
    <meta name="description" content="war spread model(内战传播模型)： A simplified ABM (Agent-Based Model) describing spatial dependency and spatial heterogeneity:  Spatial dependency: This refers to the phenomenon that an area is more likely">
<meta property="og:type" content="article">
<meta property="og:title" content="mesa-geo introduction(1)">
<meta property="og:url" content="http://example.com/2024/11/12/war-abm-mesageo/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="war spread model(内战传播模型)： A simplified ABM (Agent-Based Model) describing spatial dependency and spatial heterogeneity:  Spatial dependency: This refers to the phenomenon that an area is more likely">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/image/bg/war1datacollect.png">
<meta property="og:image" content="http://example.com/image/bg/war1anim.png">
<meta property="article:published_time" content="2024-11-12T01:40:12.000Z">
<meta property="article:modified_time" content="2024-11-17T07:07:22.373Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="ABM">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/image/bg/war1datacollect.png">
  
  
  
  <title>mesa-geo introduction(1) - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Zhuoyu,L</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="mesa-geo introduction(1)"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-11-12 09:40" pubdate>
          November 12, 2024 am
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          573 words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          5 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">mesa-geo introduction(1)</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="war-spread-model内战传播模型"><a class="markdownIt-Anchor" href="#war-spread-model内战传播模型"></a> war spread model(内战传播模型)：</h1>
<p>A simplified ABM (Agent-Based Model) describing spatial dependency and spatial heterogeneity:</p>
<ul>
<li>Spatial dependency: This refers to the phenomenon that an area is more likely to experience civil war if its surrounding areas are experiencing civil war.</li>
<li>Spatial heterogeneity: Based on existing research, we define spatial heterogeneity as the proximity to the capital. Areas closer to the capital are more prone to war, as the upper echelons of the country often initiate wars and the central government is typically located in the capital.</li>
</ul>
<p>Here, to let you get the correct data type conveniently,this blog still use the official geo-data. You can try to get the TorontoNeighbourhoods.geojson from the official website, and have a try:<br />
<a target="_blank" rel="noopener" href="https://github.com/projectmesa/mesa-examples/blob/main/gis/geo_sir/data/TorontoNeighbourhoods.geojson">https://github.com/projectmesa/mesa-examples/blob/main/gis/geo_sir/data/TorontoNeighbourhoods.geojson</a></p>
<h2 id="import-package"><a class="markdownIt-Anchor" href="#import-package"></a> import package</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> mesa <br><span class="hljs-keyword">import</span> mesa_geo <span class="hljs-keyword">as</span> mg<br><span class="hljs-keyword">import</span> mesa_geo.visualization <span class="hljs-keyword">as</span> mgv<br></code></pre></td></tr></table></figure>
<h2 id="create-regionagent"><a class="markdownIt-Anchor" href="#create-regionagent"></a> create regionAgent</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">regionAgent</span>(mg.GeoAgent):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, unique_id, model, geometry, crs,agent_type =<span class="hljs-string">&quot;no_war&quot;</span>,war_infection_risk=<span class="hljs-number">0.1</span> ,war_recovery_rate=<span class="hljs-number">0.2</span></span>):<br>        <span class="hljs-built_in">super</span>().__init__(unique_id, model, geometry, crs)<br>        <span class="hljs-variable language_">self</span>.atype= agent_type<br>        <span class="hljs-variable language_">self</span>.war_infection_risk=war_infection_risk<br>        <span class="hljs-variable language_">self</span>.war_revovery_rate=war_recovery_rate<br>        <span class="hljs-variable language_">self</span>.in_war_step=<span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__repr__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;region&quot;</span> + <span class="hljs-built_in">str</span>(<span class="hljs-variable language_">self</span>.unique_id)<br>    <br>    <span class="hljs-comment">#If an agent that is not currently engaged in war is within a fixed distance of an agent that is engaged in war</span><br>    <span class="hljs-comment"># there is also a possibility that war may directly occur between them (depending on the threshold set).</span><br>    <span class="hljs-comment"># Agents that are closer to the capital are more likely to experience war (a weight can be set here)</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">war_spread</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.atype == <span class="hljs-string">&quot;no_war&quot;</span>:<br>            neighbors= <span class="hljs-variable language_">self</span>.model.space.get_neighbors_within_distance(<br>                <span class="hljs-variable language_">self</span>,<span class="hljs-variable language_">self</span>.model.exposure_distance<br>            )<br><br>            <span class="hljs-keyword">for</span> neighnor <span class="hljs-keyword">in</span> neighbors:<br>            <span class="hljs-comment">#useLdistance(self, agent_a, agent_b)或者agent_a.geometry.distance(agent_b.geometry)</span><br>                A_C_distance=<span class="hljs-variable language_">self</span>.model.space.distance(agent_a=<span class="hljs-variable language_">self</span>, agent_b=<span class="hljs-variable language_">self</span>.model.capitalAgent)<br>                <span class="hljs-keyword">if</span> (neighnor.atype == <span class="hljs-string">&quot;in_war&quot;</span> <br>                    <span class="hljs-keyword">and</span> A_C_distance*<span class="hljs-number">0.001</span>+<span class="hljs-variable language_">self</span>.random.random() &lt; <span class="hljs-variable language_">self</span>.model.threshold_war_infection<br>                    ):<br>                    <span class="hljs-variable language_">self</span>.atype = <span class="hljs-string">&quot;in_war&quot;</span><br>                    <span class="hljs-variable language_">self</span>.in_war_step=<span class="hljs-number">0</span><br>                    <span class="hljs-keyword">break</span><br>        <br>        <span class="hljs-comment">#set step for in-war districts</span><br>        <span class="hljs-keyword">elif</span> <span class="hljs-variable language_">self</span>.atype==<span class="hljs-string">&quot;in_war&quot;</span>:<br>            <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.in_war_step&lt;<span class="hljs-number">3</span>:<br>                <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.random.random() &lt; <span class="hljs-variable language_">self</span>.war_revovery_rate:<br>                    <span class="hljs-variable language_">self</span>.atype = <span class="hljs-string">&quot;no_war&quot;</span><br>                    <span class="hljs-variable language_">self</span>.in_war_step=<span class="hljs-variable language_">self</span>.in_war_step+<span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-variable language_">self</span>.in_war_step=<span class="hljs-number">0</span><br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">step</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-variable language_">self</span>.war_spread()<br>        <span class="hljs-variable language_">self</span>.model.counts[<span class="hljs-variable language_">self</span>.atype] += <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>
<h2 id="model-part-combine-agents-time-and-space"><a class="markdownIt-Anchor" href="#model-part-combine-agents-time-and-space"></a> model part: combine agents, time and space</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_in_war_count</span>(<span class="hljs-params">model</span>):<br>    <span class="hljs-keyword">return</span> model.counts[<span class="hljs-string">&quot;in_war&quot;</span>]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_no_war_count</span>(<span class="hljs-params">model</span>):<br>    <span class="hljs-keyword">return</span> model.counts[<span class="hljs-string">&quot;no_war&quot;</span>]<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">war_model</span>(mesa.Model):<br>    <span class="hljs-comment">#here I just use the data in official file</span><br>    geojson_regions = <span class="hljs-string">&quot;D:\...\TorontoNeighbourhoods.geojson&quot;</span><br>    unique_id = <span class="hljs-string">&quot;HOODNUM&quot;</span><br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,int_war_rate=<span class="hljs-number">0.2</span>,war_revovery_rate=<span class="hljs-number">0.6</span>,threshold_war_infection=<span class="hljs-number">1.5</span>,exposure_distance=<span class="hljs-number">1000</span></span>):<br>        <span class="hljs-built_in">super</span>().__init__()<br>        <br>        <span class="hljs-variable language_">self</span>.int_war_rate=int_war_rate<br>        <span class="hljs-variable language_">self</span>.war_recovery_rate=war_revovery_rate<br>        <span class="hljs-variable language_">self</span>.threshold_war_infection=threshold_war_infection<br>        <span class="hljs-variable language_">self</span>.exposure_distance=exposure_distance<br><br><br>        <span class="hljs-variable language_">self</span>.schedule=mesa.time.RandomActivation(<span class="hljs-variable language_">self</span>)<br>        <span class="hljs-variable language_">self</span>.space=mg.GeoSpace(warn_crs_conversion=<span class="hljs-literal">False</span>)<br>        <span class="hljs-comment">#capital id</span><br>        <span class="hljs-variable language_">self</span>.capital_id=<span class="hljs-number">105</span><br><br><br>        <span class="hljs-variable language_">self</span>.counts=<span class="hljs-literal">None</span><br>        <span class="hljs-variable language_">self</span>.reset_counts()<br><br>        <span class="hljs-variable language_">self</span>.datacollector = mesa.DataCollector(<br>            &#123;<br>                <span class="hljs-string">&quot;no_war&quot;</span>: get_no_war_count,<br>                <span class="hljs-string">&quot;in_war&quot;</span>: get_in_war_count<br>            &#125;<br>        ) <br><br><br>        ac=mg.AgentCreator(<br>            regionAgent,<br>            model=<span class="hljs-variable language_">self</span>)  <br>        region_agents = ac.from_file(<span class="hljs-variable language_">self</span>.geojson_regions,unique_id=<span class="hljs-variable language_">self</span>.unique_id)<br>        <br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(region_agents)):<br>            <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.random.random() &lt; <span class="hljs-variable language_">self</span>.int_war_rate:<br>             <span class="hljs-comment">#if self.random.random() &lt; 0.2:</span><br>                region_agents[j].atype=<span class="hljs-string">&quot;in_war&quot;</span><br><br>        <span class="hljs-variable language_">self</span>.space.add_agents(region_agents)<br><br>        <span class="hljs-comment"># find capital agent id</span><br>        <span class="hljs-variable language_">self</span>.capitalAgent = <span class="hljs-built_in">next</span>((agent <span class="hljs-keyword">for</span> agent <span class="hljs-keyword">in</span> region_agents <span class="hljs-keyword">if</span> agent.unique_id == <span class="hljs-variable language_">self</span>.capital_id), <span class="hljs-literal">None</span>)<br><br><br>        <span class="hljs-keyword">for</span> agent <span class="hljs-keyword">in</span> region_agents:<br>            <span class="hljs-variable language_">self</span>.schedule.add(agent)<br><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">reset_counts</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-variable language_">self</span>.counts = &#123;<br>            <span class="hljs-string">&quot;in_war&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;no_war&quot;</span>:<span class="hljs-number">0</span><br>            &#125;<br>        <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">step</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-variable language_">self</span>.reset_counts()<br>        <span class="hljs-variable language_">self</span>.schedule.step()<br>        <span class="hljs-variable language_">self</span>.datacollector.collect(<span class="hljs-variable language_">self</span>) <br></code></pre></td></tr></table></figure>
<h2 id="run-war-spread-model"><a class="markdownIt-Anchor" href="#run-war-spread-model"></a> run war spread model</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">model = war_model()<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>): <br>    model.step()<br></code></pre></td></tr></table></figure>
<h2 id="model-visulization"><a class="markdownIt-Anchor" href="#model-visulization"></a> model visulization</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">model.datacollector.get_model_vars_dataframe()<br></code></pre></td></tr></table></figure>
<p><img src="/image/bg/war1datacollect.png" srcset="/img/loading.gif" lazyload alt="" /></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">war_model_draw</span>(<span class="hljs-params">agent</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    Portrayal Method for canvas</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br><br>    portrayal = &#123;&#125;       <br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(agent, regionAgent):<br>        <span class="hljs-keyword">if</span> agent.atype == <span class="hljs-string">&quot;in_war&quot;</span>:<br>            portrayal[<span class="hljs-string">&quot;color&quot;</span>] = <span class="hljs-string">&quot;Red&quot;</span><br>        <span class="hljs-keyword">else</span>: <br>            portrayal[<span class="hljs-string">&quot;color&quot;</span>] = <span class="hljs-string">&quot;green&quot;</span><br>    <br>    <span class="hljs-keyword">return</span> portrayal<br><br><br>model_params = &#123;<br>    <span class="hljs-string">&quot;int_war_rate&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;SliderFloat&quot;</span>,<br>        <span class="hljs-string">&quot;value&quot;</span>: <span class="hljs-number">0.2</span>,<br>        <span class="hljs-string">&quot;label&quot;</span>: <span class="hljs-string">&quot;Population Size&quot;</span>,<br>        <span class="hljs-string">&quot;min&quot;</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-string">&quot;max&quot;</span>: <span class="hljs-number">0.6</span>, <br>        <span class="hljs-string">&quot;step&quot;</span>: <span class="hljs-number">0.05</span>,<br>    &#125;,<br>    <span class="hljs-string">&quot;threshold_war_infection&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;SliderFloat&quot;</span>,<br>        <span class="hljs-string">&quot;value&quot;</span>: <span class="hljs-number">1.5</span>,<br>        <span class="hljs-string">&quot;label&quot;</span>: <span class="hljs-string">&quot;Population Size&quot;</span>,<br>        <span class="hljs-string">&quot;min&quot;</span>: <span class="hljs-number">1.2</span>,<br>        <span class="hljs-string">&quot;max&quot;</span>: <span class="hljs-number">2</span>, <br>        <span class="hljs-string">&quot;step&quot;</span>: <span class="hljs-number">0.1</span>,<br>    &#125;,<br>    <span class="hljs-string">&quot;exposure_distance&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;SliderInt&quot;</span>,<br>        <span class="hljs-string">&quot;value&quot;</span>: <span class="hljs-number">1000</span>,<br>        <span class="hljs-string">&quot;label&quot;</span>: <span class="hljs-string">&quot;Population Size&quot;</span>,<br>        <span class="hljs-string">&quot;min&quot;</span>: <span class="hljs-number">500</span>,<br>        <span class="hljs-string">&quot;max&quot;</span>: <span class="hljs-number">2000</span>, <br>        <span class="hljs-string">&quot;step&quot;</span>: <span class="hljs-number">100</span>,<br>    &#125;,<br>    <span class="hljs-string">&quot;war_revovery_rate&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;SliderFloat&quot;</span>,<br>      <span class="hljs-string">&quot;value&quot;</span>: <span class="hljs-number">0.6</span>,<br>        <span class="hljs-string">&quot;label&quot;</span>: <span class="hljs-string">&quot;Maximum Number of Steps to Recover&quot;</span>,<br>        <span class="hljs-string">&quot;min&quot;</span>: <span class="hljs-number">0.1</span>,<br>        <span class="hljs-string">&quot;max&quot;</span>: <span class="hljs-number">1</span>, <br>        <span class="hljs-string">&quot;step&quot;</span>: <span class="hljs-number">0.1</span>,   <br>     &#125;&#125;<br><br>page = mgv.GeoJupyterViz(<br>    war_model,<br>    model_params,<br>    measures= [ [<span class="hljs-string">&quot;in_war&quot;</span>, <span class="hljs-string">&quot;no_war&quot;</span>]],<br>    name=<span class="hljs-string">&quot;war spread&quot;</span>,   <br>    agent_portrayal=war_model_draw,  <br>    zoom=<span class="hljs-number">12</span>,<br>    scroll_wheel_zoom=<span class="hljs-literal">False</span><br>)<br><br></code></pre></td></tr></table></figure>
<h1 id="visualization-in-the-jupyter-notebook"><a class="markdownIt-Anchor" href="#visualization-in-the-jupyter-notebook"></a> visualization in the Jupyter notebook</h1>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">page<br></code></pre></td></tr></table></figure>
<p><img src="/image/bg/war1anim.png" srcset="/img/loading.gif" lazyload alt="" /></p>
<h2 id="reference"><a class="markdownIt-Anchor" href="#reference"></a> reference</h2>
<p>Chen Chong, Hu Jingtian. Spatial Dependence and the Prediction of Armed Conflicts [J]. International Political Science, 2022, 7(2): 86-123.<br />
<a target="_blank" rel="noopener" href="https://cc458.github.io/files/chen_hu_2022qjip.pdf">https://cc458.github.io/files/chen_hu_2022qjip.pdf</a></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/study-share/" class="category-chain-item">study share</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/ABM/" class="print-no-link">#ABM</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>mesa-geo introduction(1)</div>
      <div>http://example.com/2024/11/12/war-abm-mesageo/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>zhuoyu</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>November 12, 2024</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/11/16/ABM_report/" title="how to write a abm report?">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">how to write a abm report?</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/11/12/mesa-geo-introduction/" title="mesa-geo introduction">
                        <span class="hidden-mobile">mesa-geo introduction</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
